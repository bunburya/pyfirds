<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Basic usage &#8212; pyfirds  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyfirds package" href="pyfirds.html" />
    <link rel="prev" title="Welcome to pyfirds’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="basic-usage">
<h1>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h1>
<section id="downloading">
<h2>Downloading<a class="headerlink" href="#downloading" title="Link to this heading">¶</a></h2>
<p>The <cite>download</cite> module contains functions functions and classes to help you download FIRDS files from ESMA or the FCA.</p>
<p>You can get a list of files meeting your search criteria (date range and, optionally, file type) using the <code class="docutils literal notranslate"><span class="pre">search</span></code>
method of an <a class="reference internal" href="pyfirds.html#pyfirds.download.EsmaFirdsSearcher" title="pyfirds.download.EsmaFirdsSearcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">EsmaFirdsSearcher</span></code></a> or <a class="reference internal" href="pyfirds.html#pyfirds.download.FcaFirdsSearcher" title="pyfirds.download.FcaFirdsSearcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">FcaFirdsSearcher</span></code></a> object as appropriate. <a class="reference internal" href="pyfirds.html#pyfirds.download.EsmaFirdsSearcher.search" title="pyfirds.download.EsmaFirdsSearcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EsmaFirdsSearcher.search()</span></code></a>
(or <a class="reference internal" href="pyfirds.html#pyfirds.download.FcaFirdsSearcher.search" title="pyfirds.download.FcaFirdsSearcher.search"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FcaFirdsSearcher.search()</span></code></a>) will return a list of <a class="reference internal" href="pyfirds.html#pyfirds.download.FirdsDoc" title="pyfirds.download.FirdsDoc"><code class="xref py py-class docutils literal notranslate"><span class="pre">FirdsDoc</span></code></a> objects, each representing a FIRDS file
that is available for download.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyfirds.download</span><span class="w"> </span><span class="kn">import</span> <span class="n">EsmaFirdsSearcher</span>
<span class="n">searcher</span> <span class="o">=</span> <span class="n">EsmaFirdsSearcher</span><span class="p">()</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">searcher</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">from_date</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">to_date</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">file_type</span><span class="o">=</span><span class="s2">&quot;FULINS&quot;</span><span class="p">)</span>  <span class="c1"># A list of FirdsDoc objects</span>
</pre></div>
</div>
<p>You can download a zip file using the <a class="reference internal" href="pyfirds.html#pyfirds.download.FirdsDoc.download_zip" title="pyfirds.download.FirdsDoc.download_zip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FirdsDoc.download_zip()</span></code></a> method, or download and unzip the file using
the <a class="reference internal" href="pyfirds.html#pyfirds.download.FirdsDoc.download_xml" title="pyfirds.download.FirdsDoc.download_xml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FirdsDoc.download_xml()</span></code></a> method. You can choose whether or not to overwrite existing files and whether to
verify ESMA FIRDS files using the checksum provided (FCA FIRDS does not provide checksums for file verification, so
passing <code class="docutils literal notranslate"><span class="pre">verify=True</span></code> when downloading an FCA FIRDS file will emit a warning that the file has not been verified).</p>
<p><code class="docutils literal notranslate"><span class="pre">pyfirds</span></code> includes a convenience script, <code class="docutils literal notranslate"><span class="pre">firds-dl.py</span></code>, that you can use to download FIRDS files using the command
line. Call <code class="docutils literal notranslate"><span class="pre">firds-dl</span> <span class="pre">--help</span></code> for usage information.</p>
</section>
<section id="parsing">
<h2>Parsing<a class="headerlink" href="#parsing" title="Link to this heading">¶</a></h2>
<p>The most convenient way to parse an XML FIRDS file is to use the <a class="reference internal" href="pyfirds.html#pyfirds.xml_utils.iterparse" title="pyfirds.xml_utils.iterparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">xml_utils.iterparse()</span></code></a> function. This will
iteratively parse the XML file and yield instances of relevant dataclasses (eg, <a class="reference internal" href="pyfirds.html#pyfirds.model.ReferenceData" title="pyfirds.model.ReferenceData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReferenceData</span></code></a>) as it
encounters corresponding XML tags. Due to the size of the FIRDS files, it is not generally advisable to parse the entire
files into memory at the same time (unless you are sure you have sufficient RAM).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyfirds.xml_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">iterparse</span>
<span class="n">firds_file</span> <span class="o">=</span> <span class="s2">&quot;/path/to/FULINS_C_20250201_01of01.xml&quot;</span>
<span class="k">for</span> <span class="n">ref_data</span> <span class="ow">in</span> <span class="n">iterparse</span><span class="p">(</span><span class="n">firds_file</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;RefData&quot;</span><span class="p">:</span> <span class="n">ReferenceData</span><span class="p">}):</span>
    <span class="c1"># ref_data is a ReferenceData object</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">ref_data</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because of the size of the FIRDS files (each of which can contain hundreds of thousands of data points),
working with them can be rather slow and cumbersome. Moderate your expectations accordingly. Code contributions with
a view to making parsing more performant are always welcome.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyfirds</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#downloading">Downloading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parsing">Parsing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyfirds.html">pyfirds package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to pyfirds’s documentation!</a></li>
      <li>Next: <a href="pyfirds.html" title="next chapter">pyfirds package</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, Alan Bunbury.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>